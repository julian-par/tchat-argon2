{% extends "base.html" %}
{% block title %}Chats Privés - Nebula Nexus{% endblock %}
{% block content %}
<div class="private-chats-container">
    <!-- Titre principal -->
    <h2>Vos Espaces Privés</h2>
    
    <!-- Bouton pour créer un nouveau groupe privé -->
    <div class="private-chats-actions">
        <a href="{{ url_for('private.create_private_chat') }}" class="btn">Créer un Groupe Privé</a>
    </div>
    
    <!-- Liste des groupes privés auxquels l'utilisateur appartient -->
    <section class="user-chats">
        <h3>Groupes Actifs</h3>
        {% if chats %}
        <ul class="chat-list">
            {% for chat in chats %}
                <li class="chat-item">
                    <a href="{{ url_for('private.private_chat', chat_id=chat.id) }}">{{ chat.name }}</a>
                    {% if chat.creator_id == session.user_id %}
                        <!-- Lien de gestion pour le créateur du groupe -->
                        <a href="{{ url_for('private.manage_private_chat', chat_id=chat.id) }}" class="manage-link">(Gérer)</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        {% else %}
            <p>Vous n'êtes membre d'aucun groupe privé pour le moment.</p>
        {% endif %}
    </section>
    
    <!-- Liste des groupes ouverts disponibles pour envoyer une demande -->
    <section class="open-groups">
        <h3>Groupes Ouverts</h3>
        {% if open_groups %}
            <ul class="chat-list">
                {% for group in open_groups %}
                    <li class="chat-item">
                        <span>{{ group.name }}</span>
                        <a href="{{ url_for('private.join_private_chat', chat_id=group.id) }}" class="btn small">Rejoindre</a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Aucun groupe ouvert actuellement.</p>
        {% endif %}
    </section>
</div>
{% endblock %}
